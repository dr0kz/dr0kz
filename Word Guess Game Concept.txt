#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <time.h>

int main()
{
    int i=0,brojac=0,count=0,flag=0,flag2=0,u=0,m=0,znamence=0,zname=0,z=0;
    char zbor[50];
    char c,bukva;
    printf("Player 1\n");
    printf("Enter a word: ");
    while((c=getch())!=13)
    {
        if(c==8)
        {
            if(i>0)
            {
                printf("\b");
                printf(" ");
                printf("\b");
                i--;
            }
        }
        else
        {
            printf("*");
            zbor[i]=c;
            i++;
        }
    }
    zbor[i]='\0';
    char niza[50];
    char upotrebeni[50];
    for(int j=0;j<i;j++)
    {
        niza[j]='_';
    }
    niza[i]='\0';
    system("cls");
    while(brojac!=4)
    {
        printf("Player 2\n");
        if(brojac==0) printf("LIVES * * * *\n");
        else if(brojac==1) printf("LIVES * * *\n");
        else if(brojac==2) printf("LIVES * *\n");
        else if(brojac==3) printf("LIVES *\n");
        if(count<i-2 && zname==0)
        {
            printf("You have 1 HINT ( Press + )\n");
        }
        printf("Used letters : ");
        if(m==1)
        {
            for(int j=0;j<u;j++)
            {
                if(upotrebeni[j]!='+') printf("%c  ",upotrebeni[j]);
            }
        }
        printf("\n");
        m=1;
        for(int j=0;j<i;j++)
        {
            if(niza[j]=='_') printf("_ ");
            else
            {
                printf("%c ",tolower(niza[j]));
            }
        }
        if(count==i)
        {
            flag=1;
            break;
        }
        printf("\nEnter a letter: ");
        scanf(" %c", &bukva);
        if(bukva=='+' && count<i-2 && zname==0)
        {
            while(z!=1)
            {
                srand(time(NULL));
                int randomce=rand()%i;
                if(niza[randomce]=='_')
                {
                    niza[randomce]=zbor[randomce];
                    bukva=zbor[randomce];
                    z=1;
                }
                zname=1;
            }
        }
        flag2=0;
        znamence=0;
        for(int j=0;j<u;j++)
        {
            if(tolower(bukva)==tolower(upotrebeni[j])) znamence=1;
        }
        if(znamence==0)
        {
            upotrebeni[u]=tolower(bukva);
            u++;
            for(int k=0;k<i;k++)
            {
                if(tolower(bukva)==tolower(zbor[k]))
                {
                    flag2=1;
                    niza[k]=tolower(bukva);
                    count++;
                }
                if(k==i-1 && flag2==0 && bukva!='+') brojac++;
            }
        }
        system("cls");
    }
    if(flag==1)
    {
        printf("\nThe word is guessed!\n");
    }
    else printf("The word was: %s\n",zbor);
    system("PAUSE");
    return 0;
}
